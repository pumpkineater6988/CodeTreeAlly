{% extends 'index.html' %}
{% block page_title %}Text-to-Image Generator{% endblock %}
{% block content %}
<style>
    .progress-bar-anim {
        background: linear-gradient(90deg, #2563eb 0%, #90aaff 100%);
        animation: progress-bar-stripes 1s linear infinite;
    }
    @keyframes progress-bar-stripes {
        0% { background-position: 1rem 0; }
        100% { background-position: 0 0; }
    }
    body.dark-mode .progress {
        background: #232323;
    }
    body.dark-mode .progress-bar-anim {
        background: linear-gradient(90deg, #90aaff 0%, #2563eb 100%);
    }
</style>
<div class="container mt-4">
    <h2>Text-to-Image Generator</h2>
    <form method="POST" enctype="multipart/form-data" id="txt2imgForm">
        <div class="mb-3">
            <label for="prompt" class="form-label">Enter your prompt</label>
            <input type="text" class="form-control" id="prompt" name="prompt" required>
        </div>
        <button type="submit" class="btn btn-primary" id="txt2imgBtn">
            <span id="txt2imgBtnText">Generate Image</span>
        </button>
    </form>
    <div id="txt2imgProgress" class="progress mt-4" style="height: 8px; display:none;">
        <div class="progress-bar progress-bar-anim progress-bar-striped progress-bar-animated" style="width: 100%"></div>
    </div>
    {% if image_url %}
    <div class="mt-4">
        <h5>Generated Image:</h5>
        <img src="{{ image_url }}" alt="Generated Image" class="img-fluid rounded border">
        <a href="{{ image_url }}" download class="btn btn-success mt-2">Download</a>
    </div>
    {% endif %}
    {% if error %}
    <div class="alert alert-danger mt-3">{{ error }}</div>
    {% endif %}
</div>
<script>
    document.getElementById('txt2imgForm').addEventListener('submit', function() {
        var btn = document.getElementById('txt2imgBtn');
        btn.disabled = true;
        document.getElementById('txt2imgBtnText').textContent = 'Generating...';
        document.getElementById('txt2imgProgress').style.display = '';
    });
    window.addEventListener('DOMContentLoaded', function() {
        var btn = document.getElementById('txt2imgBtn');
        btn.disabled = false;
        document.getElementById('txt2imgBtnText').textContent = 'Generate Image';
        document.getElementById('txt2imgProgress').style.display = 'none';
    });
</script>
{% endblock %} 